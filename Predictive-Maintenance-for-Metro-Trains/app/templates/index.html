<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Predictive Maintenance Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/d3-dsv.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="flex-left">
        <h2>Controls</h2>
        <!-- Date range controls (Applied to all charts) -->
        <div class="control-group">
          <div class="control-title-container">
            <h3>Date Selection</h3>
            <span class="control-help-icon" title="Select a date range to view historical data and predictions. The dashboard will show data from February 1, 2020 to the selected end date.">?</span>
          </div>
          
          <label for="end-month-select">Month:</label>
          <select id="end-month-select"></select>

          <label for="end-day-select">Day:</label>
          <select id="end-day-select"></select>
          
          <p class="note">Select date and click Apply to update charts</p>
        </div>
        
        <div class="control-group">
          <button id="apply-btn">Apply</button>
        </div>
        
        <!-- Failure indicator section -->
        <div class="failure-indicator-container">
          <div id="failure-indicator" class="failure-indicator status-normal">
            No failure detected.
          </div>
        </div>
        
        <div id="loading-indicator" class="hidden">
          <div class="spinner"></div>
          <p>Loading data...</p>
        </div>
        
        <!-- About this Project section at bottom corner -->
        <div class="about-project-bottom">
          <div class="control-title-container">
            <h3>About this Project</h3>
            <span class="control-help-icon" title="This project was completed to meet the requirements for CSE 6242 Data and visual Analytics for Spring 2025 semester.

Team members:
1. Anish Manikonda
2. Krisanne Josephene Saviona Fernandes
3. Kritika Mehta
4. Mayowa Omobo
5. Paramvir Singh Gill
6. Srikanth Krishnan Nampoothiri">?</span>
          </div>
        </div>
      </div>
      
      <div class="flex-right">
        <!-- Main dashboard title with question mark -->
        <div class="dashboard-title-container">
          <h1 class="dashboard-title">Predictive Maintenance for Metro Trains</h1>
          <span class="title-help-icon" title="This dashboard provides real-time monitoring and predictive analytics for metro train maintenance. It uses machine learning to predict potential failures before they occur, helping maintenance teams take proactive actions.">?</span>
        </div>
        
        <!-- Binary data indicators will be inserted here by script_binary_data.js -->
        
        <div class="charts-container">
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <h3>DV Pressure Control Chart</h3>
              <span class="chart-help-icon" title="Displays the pressure differential values over time with control limits. Spikes indicate potential pressure anomalies that may lead to system failures.">?</span>
            </div>
            <div id="chart-dv-pressure" class="chart"></div>
          </div>
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <h3>Oil Temperature Control Chart</h3>
              <span class="chart-help-icon" title="Shows oil temperature measurements over time with statistical control limits. Temperature variations outside control limits may indicate system issues.">?</span>
            </div>
            <div id="chart-oil-temperature" class="chart"></div>
          </div>
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <h3>Random Forest Predictive Probability Distribution</h3>
              <span class="chart-help-icon" title="Displays the machine learning model's prediction of failure probability. Green represents normal operation, yellow indicates pre-failure conditions, and red shows actual failures.">?</span>
            </div>
            <p class="chart-note">Hover over bars to see detailed information</p>
            <div id="chart-prediction-summary" class="chart"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Module scripts -->
    <script src="{{ url_for('static', filename='js/script_dv_pressure.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script_oil_temp.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script_prediction_summary.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script_binary_data.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>